From e83808dbc60e6e09aacade4adc69b78cc8c64196 Mon Sep 17 00:00:00 2001
From: gemauck <47200619+gemauck@users.noreply.github.com>
Date: Sat, 18 Oct 2025 05:11:01 +0200
Subject: [PATCH] Complete probability field removal and fix auth import paths

- Remove probability field from all opportunity and lead forms
- Remove probability displays from cards, tables, and statistics
- Remove probability-based filtering and sorting
- Remove weighted value calculations
- Fix auth import paths: ./_lib/ -> ../_lib/ in auth subdirectory
- Clean up Icon files
---
 api/Icon => "api/Icon\r"                     |  0
 prisma/Icon => "prisma/Icon\r"               |  0
 server/Icon => "server/Icon\r"               |  0
 src/Icon => "src/Icon\r"                     |  0
 src/components/clients/ClientDetailModal.jsx | 30 -------
 src/components/clients/Clients.jsx           | 15 +---
 src/components/clients/LeadDetailModal.jsx   | 12 ---
 src/components/clients/LeadModal.jsx         | 14 +--
 src/components/clients/Pipeline.jsx          | 94 +++-----------------
 tests/Icon => "tests/Icon\r"                 |  0
 10 files changed, 12 insertions(+), 153 deletions(-)
 rename api/Icon => "api/Icon\r" (100%)
 rename prisma/Icon => "prisma/Icon\r" (100%)
 rename server/Icon => "server/Icon\r" (100%)
 rename src/Icon => "src/Icon\r" (100%)
 rename tests/Icon => "tests/Icon\r" (100%)

diff --git a/api/Icon "b/api/Icon\r"
similarity index 100%
rename from api/Icon
rename to "api/Icon\r"
diff --git a/prisma/Icon "b/prisma/Icon\r"
similarity index 100%
rename from prisma/Icon
rename to "prisma/Icon\r"
diff --git a/server/Icon "b/server/Icon\r"
similarity index 100%
rename from server/Icon
rename to "server/Icon\r"
diff --git a/src/Icon "b/src/Icon\r"
similarity index 100%
rename from src/Icon
rename to "src/Icon\r"
diff --git a/src/components/clients/ClientDetailModal.jsx b/src/components/clients/ClientDetailModal.jsx
index 4a8c659..0337ed0 100644
--- a/src/components/clients/ClientDetailModal.jsx
+++ b/src/components/clients/ClientDetailModal.jsx
@@ -125,7 +125,6 @@ const ClientDetailModal = ({ client, onSave, onClose, allProjects, onNavigateToP
     const [editingOpportunity, setEditingOpportunity] = useState(null);
     const [newOpportunity, setNewOpportunity] = useState({
         name: '',
-        probability: 50,
         stage: 'Awareness',
         expectedCloseDate: '',
         relatedSiteId: null,
@@ -475,7 +474,6 @@ const ClientDetailModal = ({ client, onSave, onClose, allProjects, onNavigateToP
         // Reset form
         setNewOpportunity({
             name: '',
-            probability: 50,
             stage: 'Awareness',
             expectedCloseDate: '',
             relatedSiteId: null,
@@ -509,7 +507,6 @@ const ClientDetailModal = ({ client, onSave, onClose, allProjects, onNavigateToP
         setEditingOpportunity(null);
         setNewOpportunity({
             name: '',
-            probability: 50,
             stage: 'Awareness',
             expectedCloseDate: '',
             relatedSiteId: null,
@@ -1360,17 +1357,6 @@ const ClientDetailModal = ({ client, onSave, onClose, allProjects, onNavigateToP
                                                     placeholder="e.g., North Mine Expansion, Premium Upgrade"
                                                 />
                                             </div>
-                                            <div>
-                                                <label className="block text-xs font-medium text-gray-700 mb-1">Probability (%)</label>
-                                                <input
-                                                    type="number"
-                                                    value={newOpportunity.probability}
-                                                    onChange={(e) => setNewOpportunity({...newOpportunity, probability: parseInt(e.target.value) || 0})}
-                                                    className="w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg"
-                                                    min="0"
-                                                    max="100"
-                                                />
-                                            </div>
                                             <div>
                                                 <label className="block text-xs font-medium text-gray-700 mb-1">Stage (AIDA)</label>
                                                 <select
@@ -1425,7 +1411,6 @@ const ClientDetailModal = ({ client, onSave, onClose, allProjects, onNavigateToP
                                                     setEditingOpportunity(null);
                                                     setNewOpportunity({
                                                         name: '',
-                                                        probability: 50,
                                                         stage: 'Awareness',
                                                         expectedCloseDate: '',
                                                         relatedSiteId: null,
@@ -1486,10 +1471,6 @@ const ClientDetailModal = ({ client, onSave, onClose, allProjects, onNavigateToP
                                                                 </span>
                                                             </div>
                                                             <div className="grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-gray-600 mb-2">
-                                                                <div>
-                                                                    <i className="fas fa-percentage mr-1.5 w-4"></i>
-                                                                    {opportunity.probability}% probability
-                                                                </div>
                                                                 {opportunity.expectedCloseDate && (
                                                                     <div>
                                                                         <i className="fas fa-calendar mr-1.5 w-4"></i>
@@ -1503,17 +1484,6 @@ const ClientDetailModal = ({ client, onSave, onClose, allProjects, onNavigateToP
                                                                     </div>
                                                                 )}
                                                             </div>
-                                                            <div className="flex items-center gap-2">
-                                                                <div className="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
-                                                                    <div 
-                                                                        className="h-full bg-green-500 transition-all"
-                                                                        style={{width: `${opportunity.probability}%`}}
-                                                                    ></div>
-                                                                </div>
-                                                                <span className="text-xs font-medium text-gray-600">
-                                                                    {opportunity.probability}%
-                                                                </span>
-                                                            </div>
                                                             {opportunity.notes && (
                                                                 <div className="mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded">
                                                                     {opportunity.notes}
diff --git a/src/components/clients/Clients.jsx b/src/components/clients/Clients.jsx
index 2e16b4f..20a1ca3 100644
--- a/src/components/clients/Clients.jsx
+++ b/src/components/clients/Clients.jsx
@@ -74,7 +74,6 @@ const initialLeads = [
         status: 'New',
         source: 'Website',
         stage: 'Awareness',
-        probability: 30,
         notes: 'Inquiry about fuel monitoring systems for 50 vehicle fleet',
         contacts: [
             {
@@ -99,7 +98,6 @@ const initialLeads = [
         status: 'Contacted',
         source: 'Referral',
         stage: 'Interest',
-        probability: 50,
         notes: 'Interested in GPS tracking and fuel telemetry for their logistics division',
         contacts: [
             {
@@ -134,7 +132,6 @@ const initialLeads = [
         status: 'Qualified',
         source: 'Trade Show',
         stage: 'Desire',
-        probability: 70,
         notes: 'Ready to move forward with implementation. Requires 100+ units',
         contacts: [
             {
@@ -176,7 +173,6 @@ const initialLeads = [
         status: 'Qualified',
         source: 'LinkedIn',
         stage: 'Action',
-        probability: 90,
         notes: 'Contract negotiations in final stage. Ready to sign this week',
         contacts: [
             {
@@ -911,11 +907,6 @@ const Clients = () => {
                         <div className="text-2xl font-bold text-gray-900">{leads.length}</div>
                         <div className="text-xs text-gray-500 mt-1">Active opportunities</div>
                     </div>
-                    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
-                        <div className="text-sm text-gray-600 mb-1">High Probability</div>
-                        <div className="text-2xl font-bold text-green-600">{leads.filter(l => l.probability >= 70).length}</div>
-                        <div className="text-xs text-gray-500 mt-1">70%+ probability</div>
-                    </div>
                     <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                         <div className="text-sm text-gray-600 mb-1">Total Opportunities</div>
                         <div className="text-2xl font-bold text-primary-600">{leads.length + clientOpportunities.length}</div>
@@ -1006,7 +997,6 @@ const Clients = () => {
                                                 {lead.contacts?.[0]?.name || 'No contact'}
                                             </div>
                                             <div className="flex items-center justify-between">
-                                                <span className="text-sm font-bold text-gray-900">{lead.probability}%</span>
                                                 <span className="text-xs text-gray-500">{lead.status}</span>
                                             </div>
                                         </div>
@@ -1035,7 +1025,6 @@ const Clients = () => {
                                                 </div>
                                                 <div className="flex items-center justify-between">
                                                     <span className="text-xs text-gray-500">Existing client</span>
-                                                    <span className="text-xs text-gray-500">{opp.probability}%</span>
                                                 </div>
                                             </div>
                                         );
@@ -1176,7 +1165,6 @@ const Clients = () => {
                             <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                             <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Industry</th>
                             <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stage</th>
-                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Probability</th>
                             <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                             <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                         </tr>
@@ -1184,7 +1172,7 @@ const Clients = () => {
                     <tbody className={`${isDark ? 'bg-gray-800 divide-gray-700' : 'bg-white divide-gray-200'} divide-y`}>
                         {filteredLeads.length === 0 ? (
                             <tr>
-                                <td colSpan="7" className="px-6 py-8 text-center text-sm text-gray-500">
+                                <td colSpan="6" className="px-6 py-8 text-center text-sm text-gray-500">
                                     <i className="fas fa-inbox text-3xl text-gray-300 mb-2"></i>
                                     <p>No leads found</p>
                                 </td>
@@ -1214,7 +1202,6 @@ const Clients = () => {
                                             {lead.stage}
                                         </span>
                                     </td>
-                                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{lead.probability}%</td>
                                     <td className="px-6 py-4 whitespace-nowrap">
                                         <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                                             lead.status === 'New' ? 'bg-blue-100 text-blue-800' :
diff --git a/src/components/clients/LeadDetailModal.jsx b/src/components/clients/LeadDetailModal.jsx
index f1396b0..d7bbff0 100644
--- a/src/components/clients/LeadDetailModal.jsx
+++ b/src/components/clients/LeadDetailModal.jsx
@@ -10,7 +10,6 @@ const LeadDetailModal = ({ lead, onSave, onClose, onConvertToClient, allProjects
         source: 'Website',
         stage: 'Awareness',
         value: 0,
-        probability: 30,
         notes: '',
         contacts: [],
         followUps: [],
@@ -395,17 +394,6 @@ const LeadDetailModal = ({ lead, onSave, onClose, onConvertToClient, allProjects
                                             />
                                         </div>
                                     </div>
-                                    <div>
-                                        <label className="block text-sm font-medium text-gray-700 mb-1.5">Probability (%)</label>
-                                        <input 
-                                            type="number" 
-                                            value={formData.probability}
-                                            onChange={(e) => setFormData({...formData, probability: parseInt(e.target.value) || 0})}
-                                            className="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
-                                            min="0"
-                                            max="100"
-                                        />
-                                    </div>
                                 </div>
 
                                 <div>
diff --git a/src/components/clients/LeadModal.jsx b/src/components/clients/LeadModal.jsx
index f6ceeef..65bdbdd 100644
--- a/src/components/clients/LeadModal.jsx
+++ b/src/components/clients/LeadModal.jsx
@@ -11,7 +11,6 @@ const LeadModal = ({ lead, onSave, onClose }) => {
         source: 'Website',
         stage: 'Initial Contact',
         value: 0,
-        probability: 20,
         assignedTo: 'Sarah Johnson',
         notes: '',
         nextAction: '',
@@ -107,7 +106,7 @@ const LeadModal = ({ lead, onSave, onClose }) => {
                             </select>
                         </div>
                     </div>
-                    <div className="grid grid-cols-3 gap-3">
+                    <div className="grid grid-cols-2 gap-3">
                         <div>
                             <label className="block text-xs font-medium text-gray-700 mb-1.5">Stage</label>
                             <select 
@@ -131,17 +130,6 @@ const LeadModal = ({ lead, onSave, onClose }) => {
                                 className="w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
                             />
                         </div>
-                        <div>
-                            <label className="block text-xs font-medium text-gray-700 mb-1.5">Probability (%)</label>
-                            <input 
-                                type="number" 
-                                min="0" 
-                                max="100" 
-                                value={formData.probability}
-                                onChange={(e) => setFormData({...formData, probability: parseInt(e.target.value) || 0})}
-                                className="w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
-                            />
-                        </div>
                     </div>
                     <div>
                         <label className="block text-xs font-medium text-gray-700 mb-1.5">Assigned To</label>
diff --git a/src/components/clients/Pipeline.jsx b/src/components/clients/Pipeline.jsx
index 5e45ae7..89243f1 100644
--- a/src/components/clients/Pipeline.jsx
+++ b/src/components/clients/Pipeline.jsx
@@ -7,11 +7,10 @@ const storage = window.storage;
  * 
  * Features:
  * - Kanban board with drag-and-drop across AIDA stages
- * - Advanced filtering by value, probability, industry, age
+ * - Advanced filtering by value, industry, age
  * - Pipeline metrics and forecasting
  * - Activity tracking and timeline
  * - Win/loss analysis
- * - Deal probability calculator
  * - Expected close date tracking
  * - Quick actions and bulk operations
  */
@@ -26,7 +25,6 @@ const Pipeline = () => {
         search: '',
         minValue: '',
         maxValue: '',
-        minProbability: '',
         industry: 'All',
         ageRange: 'All',
         source: 'All'
@@ -101,7 +99,6 @@ const Pipeline = () => {
             itemType: 'New Lead',
             stage: lead.stage || 'Awareness',
             value: lead.value || 0,
-            probability: lead.probability || 30,
             createdDate: lead.createdDate || new Date().toISOString(),
             expectedCloseDate: lead.expectedCloseDate || null
         }));
@@ -118,7 +115,6 @@ const Pipeline = () => {
                         clientName: client.name,
                         stage: opp.stage || 'Awareness',
                         value: opp.value || 0,
-                        probability: opp.probability || 30,
                         createdDate: opp.createdDate || new Date().toISOString(),
                         expectedCloseDate: opp.expectedCloseDate || null
                     });
@@ -151,11 +147,6 @@ const Pipeline = () => {
             items = items.filter(item => item.value <= Number(filters.maxValue));
         }
 
-        // Probability filter
-        if (filters.minProbability) {
-            items = items.filter(item => item.probability >= Number(filters.minProbability));
-        }
-
         // Industry filter
         if (filters.industry !== 'All') {
             items = items.filter(item => item.industry === filters.industry);
@@ -188,8 +179,6 @@ const Pipeline = () => {
             switch (sortBy) {
                 case 'value-desc': return b.value - a.value;
                 case 'value-asc': return a.value - b.value;
-                case 'probability-desc': return b.probability - a.probability;
-                case 'probability-asc': return a.probability - b.probability;
                 case 'date-desc': return new Date(b.createdDate) - new Date(a.createdDate);
                 case 'date-asc': return new Date(a.createdDate) - new Date(b.createdDate);
                 case 'name-asc': return a.name.localeCompare(b.name);
@@ -206,22 +195,16 @@ const Pipeline = () => {
         const items = getFilteredItems();
         
         const totalValue = items.reduce((sum, item) => sum + item.value, 0);
-        const weightedValue = items.reduce((sum, item) => sum + (item.value * item.probability / 100), 0);
         const avgDealSize = items.length > 0 ? totalValue / items.length : 0;
         
         const stageBreakdown = pipelineStages.map(stage => {
             const stageItems = items.filter(item => item.stage === stage.name);
             const stageValue = stageItems.reduce((sum, item) => sum + item.value, 0);
-            const stageWeighted = stageItems.reduce((sum, item) => sum + (item.value * item.probability / 100), 0);
             
             return {
                 stage: stage.name,
                 count: stageItems.length,
-                value: stageValue,
-                weighted: stageWeighted,
-                avgProbability: stageItems.length > 0 
-                    ? stageItems.reduce((sum, item) => sum + item.probability, 0) / stageItems.length 
-                    : 0
+                value: stageValue
             };
         });
 
@@ -233,7 +216,6 @@ const Pipeline = () => {
         return {
             totalDeals: items.length,
             totalValue,
-            weightedValue,
             avgDealSize,
             stageBreakdown,
             winRate,
@@ -313,7 +295,6 @@ const Pipeline = () => {
     // Render pipeline card
     const PipelineCard = ({ item }) => {
         const age = getDealAge(item.createdDate);
-        const weightedValue = (item.value * item.probability / 100);
 
         return (
             <div 
@@ -351,24 +332,11 @@ const Pipeline = () => {
                     </span>
                 </div>
 
-                {/* Value & Probability */}
+                {/* Value */}
                 <div className="flex items-center justify-between mb-2">
                     <span className="text-sm font-bold text-gray-900">
                         R {item.value.toLocaleString('en-ZA')}
                     </span>
-                    <span className={`text-xs font-medium px-2 py-0.5 rounded ${
-                        item.probability >= 70 ? 'bg-green-100 text-green-700' :
-                        item.probability >= 40 ? 'bg-yellow-100 text-yellow-700' :
-                        'bg-gray-100 text-gray-700'
-                    }`}>
-                        {item.probability}%
-                    </span>
-                </div>
-
-                {/* Weighted Value */}
-                <div className="text-xs text-gray-500 mb-2">
-                    <i className="fas fa-calculator mr-1"></i>
-                    Weighted: R {Math.round(weightedValue).toLocaleString('en-ZA')}
                 </div>
 
                 {/* Age Badge */}
@@ -400,7 +368,6 @@ const Pipeline = () => {
             {pipelineStages.map(stage => {
                 const stageItems = filteredItems.filter(item => item.stage === stage.name);
                 const stageValue = stageItems.reduce((sum, item) => sum + item.value, 0);
-                const stageWeighted = stageItems.reduce((sum, item) => sum + (item.value * item.probability / 100), 0);
                 const isDraggedOver = draggedItem && draggedItem.stage !== stage.name;
                 
                 return (
@@ -429,11 +396,8 @@ const Pipeline = () => {
                             
                             {/* Stage Metrics */}
                             <div className="mt-2 p-2 bg-white rounded border border-gray-200">
-                                <div className="text-xs text-gray-600 mb-1">
-                                    <span className="font-medium">Total:</span> R {stageValue.toLocaleString('en-ZA')}
-                                </div>
                                 <div className="text-xs text-gray-600">
-                                    <span className="font-medium">Weighted:</span> R {Math.round(stageWeighted).toLocaleString('en-ZA')}
+                                    <span className="font-medium">Total:</span> R {stageValue.toLocaleString('en-ZA')}
                                 </div>
                             </div>
                         </div>
@@ -476,8 +440,6 @@ const Pipeline = () => {
                             <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
                             <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Stage</th>
                             <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Value</th>
-                            <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Probability</th>
-                            <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Weighted</th>
                             <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Age</th>
                             <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Expected Close</th>
                         </tr>
@@ -485,7 +447,7 @@ const Pipeline = () => {
                     <tbody className="bg-white divide-y divide-gray-200">
                         {filteredItems.length === 0 ? (
                             <tr>
-                                <td colSpan="8" className="px-4 py-8 text-center text-sm text-gray-500">
+                                <td colSpan="6" className="px-4 py-8 text-center text-sm text-gray-500">
                                     <i className="fas fa-inbox text-3xl text-gray-300 mb-2"></i>
                                     <p>No deals found</p>
                                 </td>
@@ -493,7 +455,6 @@ const Pipeline = () => {
                         ) : (
                             filteredItems.map(item => {
                                 const age = getDealAge(item.createdDate);
-                                const weightedValue = (item.value * item.probability / 100);
                                 
                                 return (
                                     <tr 
@@ -528,20 +489,6 @@ const Pipeline = () => {
                                                 R {item.value.toLocaleString('en-ZA')}
                                             </span>
                                         </td>
-                                        <td className="px-4 py-3">
-                                            <span className={`px-2 py-1 text-xs font-medium rounded ${
-                                                item.probability >= 70 ? 'bg-green-100 text-green-700' :
-                                                item.probability >= 40 ? 'bg-yellow-100 text-yellow-700' :
-                                                'bg-gray-100 text-gray-700'
-                                            }`}>
-                                                {item.probability}%
-                                            </span>
-                                        </td>
-                                        <td className="px-4 py-3">
-                                            <span className="text-sm text-gray-900">
-                                                R {Math.round(weightedValue).toLocaleString('en-ZA')}
-                                            </span>
-                                        </td>
                                         <td className="px-4 py-3">
                                             <span className={`px-2 py-1 text-xs rounded font-medium ${getAgeBadgeColor(age)}`}>
                                                 {age}d
@@ -583,13 +530,11 @@ const Pipeline = () => {
             });
             
             const monthValue = monthDeals.reduce((sum, item) => sum + item.value, 0);
-            const monthWeighted = monthDeals.reduce((sum, item) => sum + (item.value * item.probability / 100), 0);
             
             monthlyForecasts.push({
                 month: monthName,
                 deals: monthDeals.length,
                 value: monthValue,
-                weighted: monthWeighted,
                 items: monthDeals
             });
         }
@@ -602,10 +547,10 @@ const Pipeline = () => {
                         <div key={index} className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                             <div className="text-sm font-medium text-gray-600 mb-2">{forecast.month}</div>
                             <div className="text-2xl font-bold text-gray-900 mb-1">
-                                R {Math.round(forecast.weighted).toLocaleString('en-ZA')}
+                                R {forecast.value.toLocaleString('en-ZA')}
                             </div>
                             <div className="text-xs text-gray-500">
-                                {forecast.deals} deals • R {forecast.value.toLocaleString('en-ZA')} pipeline
+                                {forecast.deals} deals
                             </div>
                         </div>
                     ))}
@@ -641,9 +586,6 @@ const Pipeline = () => {
                                                 <div className="text-sm font-medium text-gray-900">
                                                     R {item.value.toLocaleString('en-ZA')}
                                                 </div>
-                                                <div className="text-xs text-gray-500">
-                                                    {item.probability}% • R {Math.round(item.value * item.probability / 100).toLocaleString('en-ZA')}
-                                                </div>
                                             </div>
                                         </div>
                                     ))}
@@ -686,17 +628,12 @@ const Pipeline = () => {
             </div>
 
             {/* Metrics Dashboard */}
-            <div className="grid grid-cols-4 gap-4">
+            <div className="grid grid-cols-3 gap-4">
                 <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                     <div className="text-xs text-gray-600 mb-1">Pipeline Value</div>
                     <div className="text-2xl font-bold text-gray-900">R {metrics.totalValue.toLocaleString('en-ZA')}</div>
                     <div className="text-xs text-gray-500 mt-1">{metrics.totalDeals} total deals</div>
                 </div>
-                <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
-                    <div className="text-xs text-gray-600 mb-1">Weighted Forecast</div>
-                    <div className="text-2xl font-bold text-green-600">R {Math.round(metrics.weightedValue).toLocaleString('en-ZA')}</div>
-                    <div className="text-xs text-gray-500 mt-1">Probability-adjusted</div>
-                </div>
                 <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                     <div className="text-xs text-gray-600 mb-1">Avg Deal Size</div>
                     <div className="text-2xl font-bold text-purple-600">R {Math.round(metrics.avgDealSize).toLocaleString('en-ZA')}</div>
@@ -751,8 +688,6 @@ const Pipeline = () => {
                     >
                         <option value="value-desc">Value: High to Low</option>
                         <option value="value-asc">Value: Low to High</option>
-                        <option value="probability-desc">Probability: High to Low</option>
-                        <option value="probability-asc">Probability: Low to High</option>
                         <option value="date-desc">Newest First</option>
                         <option value="date-asc">Oldest First</option>
                         <option value="name-asc">Name: A to Z</option>
@@ -761,7 +696,7 @@ const Pipeline = () => {
                 </div>
 
                 {/* Filters */}
-                <div className="grid grid-cols-6 gap-3">
+                <div className="grid grid-cols-5 gap-3">
                     <div className="relative">
                         <input
                             type="text"
@@ -789,14 +724,6 @@ const Pipeline = () => {
                         className="px-3 py-2 border border-gray-300 rounded-lg text-sm"
                     />
                     
-                    <input
-                        type="number"
-                        placeholder="Min Prob %"
-                        value={filters.minProbability}
-                        onChange={(e) => setFilters({ ...filters, minProbability: e.target.value })}
-                        className="px-3 py-2 border border-gray-300 rounded-lg text-sm"
-                    />
-                    
                     <select
                         value={filters.industry}
                         onChange={(e) => setFilters({ ...filters, industry: e.target.value })}
@@ -823,7 +750,7 @@ const Pipeline = () => {
                 </div>
 
                 {/* Active Filters Count */}
-                {(filters.search || filters.minValue || filters.maxValue || filters.minProbability || 
+                {(filters.search || filters.minValue || filters.maxValue || 
                   filters.industry !== 'All' || filters.ageRange !== 'All') && (
                     <div className="flex items-center justify-between pt-2 border-t border-gray-200">
                         <span className="text-sm text-gray-600">
@@ -834,7 +761,6 @@ const Pipeline = () => {
                                 search: '',
                                 minValue: '',
                                 maxValue: '',
-                                minProbability: '',
                                 industry: 'All',
                                 ageRange: 'All',
                                 source: 'All'
diff --git a/tests/Icon "b/tests/Icon\r"
similarity index 100%
rename from tests/Icon
rename to "tests/Icon\r"
-- 
2.50.1 (Apple Git-155)

